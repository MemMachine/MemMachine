---
title: "Using AWS Bedrock"
description: "Guide to install and configure MemMachine using AWS Bedrock models."
icon: "aws"
---

## Prerequisites

Before beginning, ensure you have the following access and components:

**AWS Credentials**
  - **AWS Access key ID** and **AWS Secret Access Key**.
  - *Need help?* Follow this guide: [Create an AWS access key| Amazon Web Services](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html).

**AWS Bedrock Model Access**
  - Access to the necessary **models on AWS Bedrock**.
  - *Need help?* Follow this guide: [AWS Foundation Models| Amazon Web Services](https://docs.aws.amazon.com/bedrock/latest/userguide/foundation-models-reference.html).

**MemMachine**
  - You can find the latest release here: [GitHub - MemMachine/MemMachine](https://api.github.com/repos/MemMachine/MemMachine/releases/latest).

**Docker**
  - The **Docker** containerization platform must be installed and running.


## Installation: QuickStart Configuration

The installation script will automatically guide you through setting up your **Large Language Model (LLM) provider**. When prompted, you **must** select **Bedrock** to integrate with **AWS Bedrock**.

Your prompt input should match the following example:

```bash
[PROMPT] Which provider would you like to use? (OpenAI/Bedrock/Ollama) [OpenAI]: Bedrock
[INFO] Selected provider: BEDROCK
```

After selecting **Bedrock**, you will be prompted to enter the necessary **AWS credentials and configuration details**:

- **AWS Access Key ID**
- **AWS Secret Access Key**
- **AWS Region** (e.g., `us-east-1` or `eu-central-1`)
- **Choice of LLM**
- **Choice of Embedding Model**

<Note> If you are unsure about model selection, simply press **Enter** at the respective prompts to use the recommended default options.</Note>

Congratulations!  You have now successfully deployed MemMachine using AWS Bedrock!

## Manually Configuring MemMachine to use AWS Bedrock

If you already have MemMachine installed and wish to switch to AWS Bedrock manually, you can do so by updating the configuration file, `./cfg.yml`.

<Note> Within the 'cfg.yml' file, make sure duplicate models are removed.  IE, if you are using the aws_model, ensure that any other model configurations (like openai_model) are commented out or deleted to avoid conflicts. </Note>

Below is an example configuration snippets for setting up AWS Bedrock as different components of MemMachine:

### LLM Provider

To set your LLM Model for Bedrock, you will want to use the following fields:

| Parameter                     | Required? | Default           | Description                                                       |
| ----------------------------- | --------- | ----------------- | ----------------------------------------------------------------- |
| `Model:`                      | Yes       | N/A               | The Model block in the configuration                              |
| `aws_model:`                  | Yes       | N/A               | Tag you can use if setting AWS Bedrock for your Embedder.         |
| `model_vendor`                | Yes       | "amazon-bedrock"  | The vendor of the model (e.g., `openai`, `amazon-bedrock`).       |
| `region`                      | Yes       | N/A               | The AWS region for the Bedrock model (e.g., `us-west-2`).         |
| `aws_access_key_id`           | Yes       | N/A               | The AWS access key ID for Bedrock authentication.                 |
| `aws_secret_access_key`       | Yes       | N/A               | The AWS secret access key for Bedrock authentication.             |
| `model_id`                    | Yes       | N/A.              | The name of the model to use (e.g., `openai.gpt-oss-20b-1:0`).    |

Here's an example of what the Amazon Bedrock LLM Model configuration would look like in `cfg.yml`:

```yaml
Model:
  aws_model:
    model_vendor: "amazon-bedrock"
    region: "us-west-2"
    aws_access_key_id: <AWS_ACCESS_KEY_ID>
    aws_secret_access_key: <AWS_SECRET_ACCESS_KEY>
    model_id: "openai.gpt-oss-20b-1:0"
    ```

### Embedder Configuration

To set your Embedding Model for Bedrock, you will want to use the following fields:
| Parameter                            | Required? | Default          | Description                                                                           |
| ------------------------------------ | ---------- | --------------- | ------------------------------------------------------------------------------------- |
| `embedder:`                          | Yes        | N/A             | The embedder block in the configuration.                                              |
| `aws_embedder_id:`                   | Yes        | N/A             | Tag you can use if setting AWS Bedrock for your Embedder.                             |
| `name:`                              | Yes        | 'amazon-bedrock'| The vendor name of your embedder.                                                     |
| `config:`                            | Yes        | N/A             | Configuration block for the embedder.                                                 |
| `region:`                            | Yes        | N/A             | The AWS region for the Bedrock embedder (e.g., `us-west-2`).                          |
| `aws_access_key_id:`                 | Yes        | N/A             | The AWS access key ID for Bedrock authentication.                                     |
| `aws_secret_access_key:`             | Yes        | N/A             | The AWS secret access key for Bedrock authentication.                                 |
| `model_id:`                          | Yes        | N/A             | The Bedrock model ID to use for the embedder (e.g., amazon.titan-embed-text-v2:0').   |
| `similarity_metric:`                 | Yes        | N/A             | The similarity metric to use for embedding comparisons (e.g., `cosine`, `euclidean`). |

Here's an example of what the Amazon Bedrock embedder configuration would look like in `cfg.yml`:
```yaml
embedder:
    aws_embedder_id:
        name: 'amazon-bedrock'
        config:
        region: "us-west-2"
        aws_access_key_id: <AWS_ACCESS_KEY_ID>
        aws_secret_access_key: <AWS_SECRET_ACCESS_KEY>
        model_id: "amazon.titan-embed-text-v2:0"
        similarity_metric: "cosine"
```

### Reranker Configuration

To set your Reranker Model for Bedrock, you will want to use the following fields:

| Parameter                            | Required? | Default       | Description                                                  |
| ------------------------------------ | --------- | ------------- | ------------------------------------------------------------ |
| `reranker:`                          | Yes       | N/A           | This tag defines the reranker section of the cfg.yml file.   |
| `aws_reranker_id:`                   | Yes       | N/A           | Tag should you choose to use AWS Bedrock for your Reranker.  |
| `type:`                              | Yes       | N/A           | The type of reranker to use (e.g., `amazon-bedrock`).        |
| `region:`                            | Yes       | N/A           | The AWS region for the Bedrock reranker (e.g., `us-west-2`). |
| `aws_access_key_id:`                 | Yes       | N/A           | The AWS access key ID for Bedrock authentication.            |
| `aws_secret_access_key:`             | Yes       | N/A           | The AWS secret access key for Bedrock authentication.        |
| `model_id`                           | Yes       | N/A           | The Bedrock model ID to use for reranking (e.g., `amazon.rerank-v1:0`).|


Here's an example of what the Amazon Bedrock reranker configuration would look like in `cfg.yml`:

```yaml
reranker:
  aws_reranker_id:
    type: "amazon-bedrock"
    region: "us-west-2"
    aws_access_key_id: <AWS_ACCESS_KEY_ID>
    aws_secret_access_key: <AWS_SECRET_ACCESS_KEY>
    model_id: "amazon.rerank-v1:0"
    ```
<Note> If you have a GPU configuration, and want to use the cross-encoder reranker, ensure that you keep the `type: cross-encoder` section and `ce_ranker_id` in your `cfg.yml` file. </Note>

With these configurations in place, MemMachine will be set up to use AWS Bedrock for its LLM, embedding, and reranker functionalities. 
Make sure to restart MemMachine after making these changes to apply the new settings. 

*Need Help?*  Refer to the [Install Guide](./install_guide) for how to start and test your configuration with MemMachine.
